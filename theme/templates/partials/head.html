<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="{{ AUTHOR }}">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Theme colors for light/dark mode -->
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0d1117">

<!-- Canonical URL -->
{% if article %}
<link rel="canonical" href="{{ SITEURL }}/{{ article.url }}">
{% elif page %}
<link rel="canonical" href="{{ SITEURL }}/{{ page.url }}">
{% else %}
<link rel="canonical" href="{{ SITEURL }}/">
{% endif %}

<!-- Primary Meta Tags -->
{% if article %}
<meta name="description" content="{{ article.summary|striptags|truncate(160) }}">
{% elif page %}
<meta name="description" content="{{ page.summary|default(SITE_DESCRIPTION)|striptags|truncate(160) }}">
{% else %}
<meta name="description" content="{{ SITE_DESCRIPTION }}">
{% endif %}

<!-- Open Graph / Facebook -->
{% if article %}
<meta property="og:type" content="article">
<meta property="og:title" content="{{ article.title }}">
<meta property="og:description" content="{{ article.summary|striptags|truncate(200) }}">
<meta property="og:url" content="{{ SITEURL }}/{{ article.url }}">
<meta property="article:published_time" content="{{ article.date.isoformat() }}">
{% if article.modified %}
<meta property="article:modified_time" content="{{ article.modified.isoformat() }}">
{% endif %}
{% if article.author %}
<meta property="article:author" content="{{ article.author }}">
{% endif %}
{% if article.tags %}
{% for tag in article.tags %}
<meta property="article:tag" content="{{ tag }}">
{% endfor %}
{% endif %}
{% elif page %}
<meta property="og:type" content="website">
<meta property="og:title" content="{{ page.title }}">
<meta property="og:description" content="{{ page.summary|default(SITE_DESCRIPTION)|striptags|truncate(200) }}">
<meta property="og:url" content="{{ SITEURL }}/{{ page.url }}">
{% else %}
<meta property="og:type" content="website">
<meta property="og:title" content="{{ SITENAME }}">
<meta property="og:description" content="{{ SITE_DESCRIPTION }}">
<meta property="og:url" content="{{ SITEURL }}/">
{% endif %}
<meta property="og:site_name" content="{{ SITENAME }}">
<meta property="og:locale" content="{{ DEFAULT_LANG }}_{{ DEFAULT_LANG|upper }}">
{% if SITELOGO %}
<meta property="og:image" content="{{ SITEURL }}/{{ SITELOGO }}">
{% endif %}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary">
{% if TWITTER_USERNAME %}
<meta name="twitter:site" content="@{{ TWITTER_USERNAME }}">
<meta name="twitter:creator" content="@{{ TWITTER_USERNAME }}">
{% endif %}
{% if article %}
<meta name="twitter:title" content="{{ article.title }}">
<meta name="twitter:description" content="{{ article.summary|striptags|truncate(200) }}">
<meta name="twitter:url" content="{{ SITEURL }}/{{ article.url }}">
{% elif page %}
<meta name="twitter:title" content="{{ page.title }}">
<meta name="twitter:description" content="{{ page.summary|default(SITE_DESCRIPTION)|striptags|truncate(200) }}">
<meta name="twitter:url" content="{{ SITEURL }}/{{ page.url }}">
{% else %}
<meta name="twitter:title" content="{{ SITENAME }}">
<meta name="twitter:description" content="{{ SITE_DESCRIPTION }}">
<meta name="twitter:url" content="{{ SITEURL }}/">
{% endif %}
{% if SITELOGO %}
<meta name="twitter:image" content="{{ SITEURL }}/{{ SITELOGO }}">
{% endif %}

<!-- Favicon -->
<link rel="icon" href="{{ SITEURL }}/favicon.ico" type="image/x-icon">

<!-- Styles -->
<link rel="stylesheet" href="{{ SITEURL }}/theme/css/style.css">

<!-- RSS Feed -->
{% if FEED_ALL_ATOM %}
<link href="{{ SITEURL }}/{{ FEED_ALL_ATOM }}" type="application/atom+xml" rel="alternate" title="{{ SITENAME }} Atom Feed">
{% endif %}

<!-- Structured Data (JSON-LD) -->
<script type="application/ld+json">
{% if article %}
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "{{ article.title }}",
    "description": "{{ article.summary|striptags|truncate(200)|e }}",
    "datePublished": "{{ article.date.isoformat() }}",
    {% if article.modified %}"dateModified": "{{ article.modified.isoformat() }}",{% endif %}
    "author": {
        "@type": "Person",
        "name": "{{ AUTHOR }}",
        "url": "{{ SITEURL }}/"
    },
    "publisher": {
        "@type": "Person",
        "name": "{{ AUTHOR }}"
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "{{ SITEURL }}/{{ article.url }}"
    }
}
{% elif page %}
{
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "{{ page.title }}",
    "description": "{{ page.summary|default(SITE_DESCRIPTION)|striptags|truncate(200)|e }}",
    "url": "{{ SITEURL }}/{{ page.url }}",
    "author": {
        "@type": "Person",
        "name": "{{ AUTHOR }}"
    }
}
{% else %}
{
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "{{ SITENAME }}",
    "description": "{{ SITE_DESCRIPTION }}",
    "url": "{{ SITEURL }}/",
    "author": {
        "@type": "Person",
        "name": "{{ AUTHOR }}",
        "jobTitle": "Senior Data Scientist"
    }
}
{% endif %}
</script>
